{% extends 'base.html.twig' %}

{% block title %}Tasks List{% endblock %}

{% block body %}
	<div class="container mx-auto px-4 py-8">
		<div class="flex justify-between items-center mb-8">
			<h1 class="text-3xl font-bold mb-6">Your Tasks</h1>
			<a href="{{ path('task_new') }}" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">New Task</a>
		</div>

		{% for label, messages in app.flashes %}
			{% for message in messages %}
				<div class="{{ label == 'success' ? 'bg-green-100 border border-green-400 text-green-700' : '' }}{{ label == 'error' ? 'bg-red-100 border border-red-400 text-red-700' : '' }} px-4 py-3 rounded mb-4">
					{{ message }}
				</div>
			{% endfor %}
		{% endfor %}

		{% if tasks is not empty %}
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
				{% for task in tasks %}
					<div class="bg-white rounded-lg shadow-md p-6">
						<h2 class="text-xl font-semibold mb-2">
							<a href="{{ path('task_show', {id: task.id}) }}" class="hover:text-blue-600">
								{{ task.title }}
							</a>
						</h2>
						<p class="text-gray-600 mb-2">{{ task.description|length > 15 ? task.description|slice(0, 15) ~ '...' : task.description|default('-') }}</p>
						<div class="flex items-center justify-between mb-2">
							<span class="text-sm {% if task.status.value == 'COMPLETED' %}text-green-600{% else %}text-yellow-600{% endif %}">{{ task.status.value|upper }}</span>
							<span class="text-sm text-gray-500">{{ task.dueDate ? 'Due: ' ~ task.dueDate|date('F d, Y') : '' }}</span>
						</div>
					</div>
				{% endfor %}
			</div>
		{% else %}
			<p class="text-gray-600">No tasks found.</p>
		{% endif %}
	</div>
{% endblock %}
